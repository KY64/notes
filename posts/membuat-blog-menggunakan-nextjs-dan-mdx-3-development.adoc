= Membuat Blog Menggunakan NextJS dan MDX [3-Development]
:author: Excel
:create_date: 2022-11-27T21:26:13
:tagline: Desain Blog Sederhana Menggunakan ReactJS dan NextJS
:description: Mengintegrasikan MDX dengan NextJS
:tag: tutorial,js,indonesia

Setelah belajar tentang berbagai fitur MDX pada _post_ link:www.insert-url-here.com[sebelumnya], kita sudah mendapat fundamental bagaimana cara kerja MDX. Sekarang kita implementasikan fitur tersebut untuk membuat blog sederhana dengan memanfaatkan _framework_ https://nextjs.org/[NextJS] yang merupakan _Server-Side Rendering framework_ ReactJS yang memudahkan melakukan _routing_ halaman secara otomatis.

*_Belum belajar NextJS? No Problem!_*

Kita akan menyelam bersama dan mengeksplorasi berbagai fitur NextJS yang memudahkan kita untuk megonfigurasi _website_.

== Prolog

Bagi yang pernah bermain ReactJS mungkin akan terheran dengan _file_ yang dibuat. Tidak ada _file_ dengan format HTML sama sekali dan kita daritadi hanya membuat _file_ dengan _format_ `.tsx`. Itu merupakan salah satu keunggulan dari NextJS dimana kita hanya perlu membuat _folder_ bernama *pages* yang nantinya secara https://nextjs.org/docs/getting-started[otomatis] akan di-_render_ dan _routing_ oleh NextJS. Jadi setiap nama _file_ `.js`,`.jsx`,`.ts`, atau `.tsx` dalam _folder_ *pages* akan menjadi _parameter_ di URL.

Mari kita buat _file_ dan _folder_ baru di dalam _folder_ *pages*.

. Buat _folder_ bernama *blog* di dalam _folder_ *pages*
. Buat _file_ *[uid].tsx* dalam _folder_ *blog*

_Pastikan terdapat tanda kurung siku `[ ]` di antara nama *uid*_

. Isi _file_ *[uid].tsx* dengan kode berikut:
[source,tsx]
----
import * as React from "react";

const Blog: React.FC = () => <h1>This is a blog post</h1>;

export default Blog;

----

. Jalankan _development server_ kemudian coba buka URL `http://localhost:3000/blog/post-1` pada _browser_

Hasilnya akan muncul seperti gambar di atas, cobalah ubah URL-nya menjadi `http://localhost:3000/blog/my-post`. Nantinya akan muncul hasil yang sama. Itu karena ketika memasukkan paramater `/blog/my-post` dan `/blog/post-1` sebenarnya ia mengarah ke satu _file_ yang sama yaitu *[uid].tsx*. Oleh karena itu tampilannya tidak berubah. Ini juga merupakan keunggulan lain dari NextJS yang mampu melakukan _https://nextjs.org/docs/routing/dynamic-routes[dynamic routing]._

== Let's Build a Prototype!

Kita sudah tahu sekilas tentang NextJS dan apa saja fiturnya, kita akan mulai mendalaminya dengan membuat prototipe blog yang mengintegrasikan MDX dan NextJS, dan itu cukup suâ€¦..

=== Preparasi

Kita perlu mengatur beberapa hal sebelum mulai mengembangkan.

. Bukalah _file_ *[uid].tsx* dan ubah isinya menjadi berikut:
[source,tsx]
----
// Menggunakan module ReactJS
import * as React from "react";
import { MDXProvider } from "@mdx-js/react";
// Mengimpor konten file hello.mdx
import Hello from "posts/hello.mdx";
import { Title, Subtitle, Paragraph, Image } from "@/.";
// Function Component

// Markdown custom component
const components: object = {
  h1: Title,
  h2: Subtitle,
  p: Paragraph,
  img: Image,
};

const Blog = () => (
  <main style={{ fontFamily: "sans-serif" }}>
    <MDXProvider components={components}>
      <Hello />
    </MDXProvider>
  </main>
);

export default Blog;

----

. Bukalah _file_ *index.tsx* dan ubah isinya menjadi berikut:
[source,tsx]
----
import * as React from "react";

const Index: React.FC = () => <main></main>;

export default Index;

----

. Ubah nama _file_ *hello.mdx* menjadi *post-1.mdx*, gandakan _file_ tersebut sebanyak 3 kali dengan nama *post-2.mdx*, *post-3.mdx*, dan *post-4.mdx*.

=== Membuat Komponen

Bila kita lihat di bagian awal dari _posting_ ini, terdapat _mockup_ dari _website_ yang akan kita buat. Disini kita akan memecah setiap bagian _website_ tersebut menjadi komponen yang berbeda beda.

=== 1. Navbar

Mulai dari bagian paling atas, yaitu _Navigation Bar_ dimana terdapat sebuah logo dan dua _link_ untuk navigasi.

. Buat _file_ *Navbar.tsx* dalam _folder_ *components*
. Salin kode berikut lalu simpan:
[source,tsx]
----
// Mengimpor module
import * as React from "react";
import Link from "next/link";

// Menentukan tipe data props
interface navbarProps {
  logo: string;
}

// Function component
const Navbar: React.FC<navbarProps> = ({ logo }: navbarProps) => (
  <header>
    <nav style={{ padding: "5px 0", marginBottom: "30px" }}>
      <img
        src={logo}
        style={{ display: "block", margin: "0 auto", width: "500px" }}
      />
      <div style={{ textAlign: "center" }}>
        <Link href="/">
          <a>Beranda</a>
        </Link>
        <a>Tentang</a>
      </div>
    </nav>
    <style jsx>{`
      a {
        color: darkgray;
        padding: 0 22px;
        text-decoration: none;
      }

      a:hover {
        color: firebrick;
        cursor: pointer;
      }
    `}</style>
  </header>
);

export default Navbar;
----

. Buka _file_ *index.tsx* dalam _folder_ *pages* kemudian ubah isinya menjadi berikut:
[source,tsx]
----
import * as React from "react";
import { Navbar } from "@/.";

const Index: React.FC = () => (
  <>
    <Navbar />
    <main></main>
  </>
);

export default Index;
----

Perhatikan bahwa nantinya akan muncul sebuah _error_ pada bagian `&lt;Navbar /&gt;` seperti ini:

[source,console]
----
Property 'logo' is missing in type '{}' but required in type 'navbarProps'.
----

Apa yang salah? Kita belum memberikan _props_ `logo` yang sebelumnya kita deklarasikan pada _file_ *Navbar.tsx*. Pada _Javascript_, _error_ ini tidak akan muncul karena kita tidak bisa mengatur apakah _props_ tersebut wajib dideklarasikan atau tidak. Di _Typescript_ kita terbantu dengan mendeklarasikan `interface` sehingga bila kita lupa menyebutkan _props_ yang dibutuhkan akan muncul _error_.

Kita hanya perlu memodifikasinya menjadi seperti berikut:

[source,html]
----
<Navbar
  logo="http://www.coolgenerator.com/Data/Textdesign/202008/535249cb9a77839f16f715f25637ec7e.png"
/>
----

Logo yang digunakan didapat dari _website_ https://www.coolgenerator.com/png-text-generator[ini]. Silahkan memodifikasi tulisannya kemudian menyalin _link_-nya dan dimasukkan sebagai _value_ dari _props_ `logo`

=== 2. Featured Post

Berikutnya kita membuat komponen untuk menampilkan _post_ terbaru. Komponen ini berfungsi untuk menampilkan _posting_ terbaru.

. Buat _file_ *Button.tsx* di dalam _folder_ *components*
. Salin kode berikut dan simpan
[source,tsx]
----
import * as React from "react";

interface buttonProps {
  children: string;
  bgColor: string;
  color: string;
}

const Button: React.FC<buttonProps> = ({
  children,
  bgColor,
  color,
}: buttonProps) => (
  <button>
    {children}
    <style jsx>{`
      button {
        padding: 10px 24px;
        background: ${bgColor};
        border: 2px solid white;
        color: ${color};
        cursor: pointer;
      }
      button:hover {
        background: white;
        color: #d50000;
      }
    `}</style>
  </button>
);

export default Button;
----

. Buat _file_ *Featured.tsx* di dalam _folder_ *components*
. Salin kode berikut dan simpan
[source,tsx]
----
import * as React from "react";
import { Title, Button } from "@/.";
import Link from "next/link";

interface featuredProps {
  title: string;
  description: string;
  cover: string;
  path: string;
}

const Featured: React.FC<featuredProps> = ({
  title,
  description,
  cover,
  path,
}: featuredProps) => (
  <div style={{ position: "relative", marginBottom: "180px" }}>
    <div
      style={{
        background: "#D50000",
        width: "55%",
        color: "white",
        padding: "20px",
      }}
    >
      <div style={{ width: "80%", height: "300px" }}>
        <h1 style={{ fontWeight: 400 }}>{title}</h1>
        <p
          style={{
            fontSize: "14pt",
            textAlign: "justify",
            lineHeight: "1.5",
            height: "170px",
          }}
        >
          {description}
        </p>
        <div style={{ display: "flex", justifyContent: "flex-end" }}>
          <Link href="blog/[uid]" as={path}>
            <a>
              <Button bgColor="transparent" color="white">
                Baca lebih lanjut
              </Button>
            </a>
          </Link>
        </div>
      </div>
    </div>
    <img
      src={cover}
      style={{
        position: "absolute",
        top: 40,
        right: 65,
        width: "620px",
        height: "400px",
        boxShadow: "0 0 30px rgba(0,0,0,.3)",
        objectFit: "cover",
      }}
    />
  </div>
);

export default Featured;
----

. Tambahkan komponen `&lt;Featured /&gt;` pada _file_ *index.tsx* dalam _folder_ *pages*
[source,tsx]
----
import * as React from "react";
import { Navbar, Featured } from "@/.";

const Index: React.FC = () => (
  <>
    <Navbar />
    <main>
      <section id="featured-post">
        <Featured
          title="5 TRIK AGAR SELALU BAHAGIA DALAM HIDUP"
          description="Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos ad illum doloremque excepturi distinctio ipsam eaque? Laborum velit sint beatae illum assumenda officiis? Placeat adipisci ex neque consequuntur enim perspiciatis.Quod porro ipsa ipsam iure officia nam natus atque dicta facilis repellendus quis ea fugit aut aperiam officiis, quam sequi esse, amet in! Voluptates, ....."
          cover="https://images.unsplash.com/flagged/photo-1551592398-329a440f9edd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=751&q=80"
          path="blog/post-1"
        />
      </section>
    </main>
  </>
);

export default Index;
----

Jika berhasil maka akan muncul tampilan di atas.
Cobalah untuk mengklik _button_ tersebut maka tampilan halaman akan berubah dan URL-nya berpindah ke `http://localhost:3000/blog/post-1`

Jika kita lihat kembali _file_ *Featured.tsx* pasti menemukan keanehan seperti ini

[source,html]
----
<Link href="blog/[uid]" as="blog/post-1">
  <a>
    <Button bgColor="transparent" color="white">
      Baca lebih lanjut
    </Button>
  </a>
</Link>
----

Dimana `&lt;Link&gt;` kita dapatkan dari `import Link from &quot;next/link&quot;;`. Itu berfungsi untuk membuat tautan yang mengarahkan kita ke halaman tertentu.

*_Kenapa kita tidak langsung membuat `&lt;a href=&quot;url&quot; /&gt;` saja?_* ðŸ¤”

Ketika kita menggunakan `&lt;a href=&quot;url&quot; /&gt;`, setiap kali melakukan navigasi tiap halaman maka _browser_ akan mengubah seluruh tampilan halaman dengan halaman yang baru dan proses itu terjadi di sisi _server_. Sedangkan ketika menggunakan `&lt;Link href=&quot;url&quot;&gt;` maka ketika melakukan navigasi, _server_ hanya mengirim _file_ HTML dan JS yang diperlukan. Selanjutnya _client_ mengeksekusi _file_ JS yang mengubah isi HTML melalui DOM. Hal yang menarik disini adalah ketika kita hendak membuka halaman yang sebelumnya telah dibuka.

Bila menggunakan `&lt;a href=&quot;url&quot; /&gt;`, kita akan men-_load_ kembali seluruh isi halaman tersebut sehingga memakan waktu cukup lama. Namun bila menggunakan `&lt;Link href=&quot;url&quot;&gt;` justru perpindahan halaman menjadi sangat cepat seperti contoh yang ditunjukkan pada halaman dokumentasi NextJS karena halaman sebelumnya telah tersimpan sebagai _cache_.

_`&lt;Link&gt;` hanya digunakan untuk navigasi antar halaman web internal. Apabila ingin mengalihkan ke link eksternal misal dari `http://localhost:3000` ke `www.kymind.world` maka gunakan `&lt;a href=&quot;url&quot;&gt;`_

Selain itu, pada `&lt;Link&gt;` terdapat attribut yang aneh juga yaitu setelah mengetik `href` kita menambahkan `as` seperti berikut

[source,html]
----
<link href="blog/[uid]" as="blog/post-1" />
----

Ini dinamakan _https://nextjs.org/docs/api-reference/next/link#dynamic-routes[dynamic routing]_. Kita tetap saja bisa meniadakan `as`, nantinya kita akan diarahkan ke `http://localhost:3000/blog/[uid]`. Tapi ketika kita membuat sebuah blog, katakan kita punya 40 blog, itu berarti kita harus mengetik secara manual 40 `&lt;Link&gt;` dan akan terus bertambah seiring bertambahnya blog yang kita buat. Repot kan? Disinilah peran `as` untuk melakukan _dynamic routing_ yang juga fitur NextJS.

=== 3. Card

Kita sudah membuat bagian _featured_ selanjutnya kita perlu menampilkan _post_ lainnya di halaman utama. Disini kita akan menggunakan _card_ untuk menampilkan daftar _post_ yang pernah dibuat.

. Buat _file_ *Card.tsx* di dalam _folder_ *components*
. Isi dengan kode berikut
[source,tsx]
----
import * as React from "react";

interface cardProps {
  title: string;
  subtitle: string;
  cover: string;
}

const Card: React.FC<cardProps> = ({ title, subtitle, cover }: cardProps) => (
  <div className="card" style={{ background: "white", cursor: "pointer" }}>
    <img src={cover} width="320px" style={{ margin: 0 }} />
    <div style={{ padding: "12px" }}>
      <h3 style={{ margin: 0 }}>{title}</h3>
      <p style={{ color: "grey" }}>{subtitle}</p>
    </div>
    <style jsx>{`
      .card {
        transition: 0.3s;
      }
      .card:hover {
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
      }
    `}</style>
  </div>
);

export default Card;
----

. Buatlah _file_ *Grid.tsx* di dalam _folder_ *components*
. Isi dengan kode berikut
[source,tsx]
----
import * as React from "react";

interface gridProps {
  col: string;
  row: string;
  gap?: string;
  justify?: string;
  align?: string;
  children: JSX.Element[];
}

const Grid: React.FC<gridProps> = ({
  children,
  col,
  row,
  gap = "auto",
  justify = "initial",
  align = "initial",
}: gridProps) => (
  <div
    style={{
      display: "grid",
      gridTemplate: `${row} / ${col}`,
      justifyContent: `${justify}`,
      alignItems: `${align}`,
      gridGap: `${gap}`,
    }}
  >
    {children}
  </div>
);

export default Grid;
----

. Ubah _file_ *index.tsx* dalam _folder_ *pages* menjadi berikut:
[source,tsx]
----
import * as React from "react";
import { Navbar, Featured, Grid, Card } from "@/.";

const Index: React.FC = () => (
  <>
    <Navbar />
    <main>
      <section id="featured-post">
        <Featured
          title="5 TRIK AGAR SELALU BAHAGIA DALAM HIDUP"
          description="Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos ad illum doloremque excepturi distinctio ipsam eaque? Laborum velit sint beatae illum assumenda officiis? Placeat adipisci ex neque consequuntur enim perspiciatis.Quod porro ipsa ipsam iure officia nam natus atque dicta facilis repellendus quis ea fugit aut aperiam officiis, quam sequi esse, amet in! Voluptates, ....."
          cover="https://images.unsplash.com/flagged/photo-1551592398-329a440f9edd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=751&q=80"
          path="blog/post-1"
        />
      </section>
      <section id="latest-post">
        <Grid col="320px 320px 320px" row="auto" gap="30px" justify="center">
          <Card
            title="LET'S GO SNOWBOARDING"
            subtitle="Snowboarding is a good activity y'know!"
            cover="https://images.unsplash.com/photo-1580238053771-c61b5b88650b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=600&q=80"
          />
        </Grid>
      </section>
    </main>
  </>
);

export default Index;
----

Tampilannya akan seperti di atas, bila ingin memperbanyak _card_ bisa dengan menggandakan `&lt;Card&gt;` di dalam `&lt;Grid&gt;` sehingga seperti ini

[source,tsx]
----
<Grid>
  <Card />
  <Card />
  <Card />
</Grid>
----

Maka nanti tampilannya akan menyesuaikan dengan sendirinya.

=== 4. Footer

Komponen selanjutnya yang kita buat yaitu _footer_. Komponen ini kita buat sederhana yang biasa kita lihat di contoh blog lainnya.

. Buat _file_ *Footer.jsx* di _folder_ *components*
. Salin kode berikut
[source,tsx]
----
import * as React from "react";

const Footer: React.FC = () => (
  <div
    style={{
      marginTop: "80px",
      padding: "24px 0",
      textAlign: "center",
      fontSize: "11pt",
      color: "grey",
    }}
  >
    KY&copy;Copyright 2020
  </div>
);

export default Footer;
----

. Tambahkan komponen `&lt;Footer /&gt;` di bawah `&lt;/main&gt;` jadi isi _file_ *index.tsx* pada _folder_ *pages* menjadi seperti ini
[source,tsx]
----
....
        </Grid>
      </section>
    </main>
    <Footer />
  </>

....
----

_Jangan lupa untuk `import` dulu sebelum menambahkan komponen_

== Bonus!

Sebelumnya pada komponen `&lt;Featured&gt;` dan `&lt;Cards&gt;` kita mengisi setiap `props` secara manual. Masalahnya, apabila kita melakukan perubahan judul maka kita akan mengubah isi _file_ `.mdx` dan `.tsx` yang tentunya hal ini tidak ideal. Disini kita akan melakukan sedikit modifikasi pada _file_ `.mdx` agar kita bisa mengambil metadata dari _file_ tersebut.

. Bukalah _file_ *post-1.mdx*
. Tambahkan baris berikut pada baris pertama
[source,js]
----
export const meta = {
  uid: `post-1`,
  title: `5 TRIK AGAR SELALU BAHAGIA DALAM HIDUP`,
  description: `Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos
          ad illum doloremque excepturi distinctio ipsam eaque? Laborum velit
          sint beatae illum assumenda officiis? Placeat adipisci ex neque
          consequuntur enim perspiciatis.Quod porro ipsa ipsam iure officia nam
          natus atque dicta facilis repellendus quis ea fugit aut aperiam
          officiis, quam sequi esse, amet in! Voluptates, 
          .....`,
  cover: `https://images.unsplash.com/flagged/photo-1551592398-329a440f9edd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=751&q=80`,
};
----

. Simpan, kemudian tambahkan kode berikut pada _file_ *index.tsx* dalam _folder_ *pages*. *_(Abaikan error yang muncul)_*
[source,tsx]
----
import { meta } from "posts/post-1.mdx";
----

. Pada _file_ tersebut, ubah `props` dari komponen `&lt;Featured /&gt;` menjadi seperti ini
[source,html]
----
<Featured title={meta.title} description={meta.description} cover={meta.cover}
path={`blog/${meta.uid}`} />
----

. Jalankan kembali _development server_

Kita juga bisa menambahkannya pada _file_ *post-2.mdx*, *post-3.mdx*, dan *post-4.mdx*.

'''

Ok, kita sudah selesai membuat desain prototipe dari blog kita. Namun konten yang kita buat masih statis dimana kita mengimpor sendiri deskripsi dan judul dari _post_ tersebut. Lalu bagaimana caranya agar kita tidak perlu repot repot untuk mengimpornya secara manual? Kita akan mengenal lebih jauh fitur NextJS untuk membantu kita membuat konten dinamis pada _posting_ berikutnya. *_Which is a BONUS!_*

*Photo Credits*

* Red Dress Girl by https://unsplash.com/photos/4Ttzoy1EQDs[Andre Furtado] (Unsplash)
* Snowboarding by https://unsplash.com/photos/ziaGSKwdzn8[Felipe Giacometti] (Unsplash)
* Man Praying by https://unsplash.com/photos/MVGwTsDfmes[Artem Beliaikin] (Unsplash)
* Volkswagen Beetle Lego by https://unsplash.com/photos/NYbTdrBh740[Atish Sewmangel] (Unsplash)
