= Membuat Blog Menggunakan NextJS dan MDX [2-Kustomisasi]
:author: Excel
:create_date: 2022-11-27T21:25:13
:tagline: Modifikasi Komponen Markdown Menggunakan CSS
:description: Mempercantik tampilan markdown dengan menggunakan CSS
:tag: tutorial,js,indonesia

[quote]   
Orang menilai _mulai_ dari tampilan

Dengan begitu, _first impression_ akan menjadi bagian krusial dalam mendesain blog. Disini kita akan belajar bagaimana mengustomisasi komponen _Markdown_ dari blog yang kita buat https://www.insert-url-here.com[sebelumnya].

== Styling MDX

Apabila kita melihat halaman utama dari https://mdxjs.com/[MDX] kita akan melihat sebuah contoh _markdown_ yang bercampur dengan sintaks HTML. Sesuai dengan definisinya, _"MDX is an authorable format that lets you seamlessly write JSX in your Markdown documents"_. Ini berarti kita dapat membuat komponen di dalam _file_ `.md` atau `.mdx`. Ada beberapa cara untuk mengustomisasi _markdown_ pada MDX seperti yang dijelaskan di halaman https://mdxjs.com/getting-started[ini]. Kita akan coba beberapa dari contoh tersebut.

=== HTML in Markdown

Sesuai dengan contoh pada halaman utama MDX, kita akan menambahkan HTML pada _file_ *hello.mdx* menjadi seperti berikut:

[source,mdx]
----
<h1 style={{fontFamily: "sans-serif",
            letterSpacing: "5pt",
            fontWeight: 300
          }}
> Next MDX Blog </h1>

## MDX is [Awesome](https://mdxjs.com/)!

<p style={{color: "teal"}}> Hello World! This is my first MDX blog content </p>

----

Jalankan _development server_ dengan perintah `npm run dev` atau `yarn dev`, Maka tampilannya akan seperti berikut

Kita telah melakukan perubahan pada bagian judul dan paragraf tapi kita tidak melakukan perubahan pada tulisan _MDX is Awesome_ yang masih menggunakan sintaks _Markdown_. Namun dari hasilnya kita bisa mendapat tampilan HTML+CSS dan _Markdown_ secara bersamaan.

=== JSX in Markdown

Selain menambahkan HTML, kita juga bisa menambahkan _React Component_ di dalamnya. Inilah keunggulan MDX yang menghilangkan _gap_ antara _Markdown_ dengan _JSX_ sehingga kita bisa menggunakan keduanya dalam 1 _file_

Disini kita akan membuat komponen terlebih dahulu untuk mencobanya

. Buatlah _file_ *Button.tsx* dalam _folder_ *components*
. Isilah _file_ tersebut dengan kode berikut:
[source,tsx]
----
import * as React from "react";

const Button :React.FC = ({text, bgColor, color}) => (
    <button style={{padding: "10px 24px",
                    backgroundColor: `${bgColor}`,
                    border: "none",
                    borderRadius: "10px",
                    color: `${color}`,
                    cursor: "pointer"
                  }}
    >
        {text}
    </button>
)

export default Button;
----

. Apabila terdapat _error_, abaikan dulu. Buka _file_ *hello.mdx* kemudian pada baris pertama tambahkan kode berikut:
[source,tsx]
----
import Button from "@/Button";
----

_Pastikan `tsconfig.json` telah diatur sesuai dengan langkah di artikel https://www.insert-url-here.com[sebelumnya]_

. Tambahkan kode berikut pada baris terakhir:
[source,tsx]
----
<Button text="Click me!" bgColor="black" color="white" />
----

. Sehingga isi _file_ dan tampilannya akan menjadi seperti ini
[source,mdx]
----
import Button from "@/Button";

<h1 style={{fontFamily: "sans-serif",
            letterSpacing: "5pt",
            fontWeight: 300
          }}
> Next MDX Blog </h1>

## MDX is [Awesome](https://mdxjs.com/)!

<p style={{color: "teal"}}> Hello World! This is my first MDX blog content </p>

<Button text="Click me!" bgColor="black" color="white" />
----

_Sangat mudah kan?_

Tentu kita akan sangat terbantu dalam membuat blog dengan memanfaatkan fitur MDX yang dapat menggabungkan HTML dengan Markdown. Namun, tentunya bila terlalu banyak sintaks HTML di dalam _file_ `.md` atau `.mdx` pada akhirnya akan terasa sama saja seperti membuat blog hanya menggunakan HTML. Selanjutnya kita akan mencoba fitur MDX yang membantu kita untuk mengustomisasi komponen tanpa perlu menambahkan JSX atau HTML di _file_ `.md` maupun `.mdx`.

_Tunggu, kita masih punya 1 masalah_

Tadi ketika membuat komponen `Button` pasti mendapat sebuah _error_ seperti berikut:

[source,console]
----
Property 'text' does not exist on type '{ children?: ReactNode; }'.
Property 'bgColor' does not exist on type '{ children?: ReactNode; }'.
Property 'color' does not exist on type '{ children?: ReactNode; }'.
----

_Proses pengembangan ini menggunakan https://code.visualstudio.com/[Visual Studio Code] kemungkinan error yang muncul bisa berbeda_

Meski tampilannya sudah muncul sesuai harapan. Disini kita belum memberitahu _Typescript_ mengenai _props_ yang kita gunakan pada _component_ `Button` sehingga muncul _error_. Kita perlu menambahkan beberapa baris pada _file_ *Button.tsx* untuk mengatasi hal ini.

*_Argh!!_*

=== _Hehe… Sabar. (:_

Ubahlah _file_ *Button.tsx* menjadi seperti berikut:

[source,tsx]
----
import * as React from "react";

interface buttonProps {
    text: string,
    bgColor: string,
    color: string
}

const Button :React.FC <buttonProps> = ({text, bgColor, color}) => (
    <button style={{padding: "10px 24px",
                    backgroundColor: `${bgColor}`,
                    border: "none",
                    borderRadius: "10px",
                    color: `${color}`,
                    cursor: "pointer"
                  }}
    >
        {text}
    </button>
)

export default Button;
----

Setelah mengubah menjadi baris itu maka _error_ yang muncul akan hilang. Kita akan bahas apa yang baru saja ditambahkan.

Semisal kita mendapat sebuah undangan ke sebuah acara, pada acara tersebut terdapat _dresscode_ yang harus dikenakan. Warna, lengan panjang/pendek, dan jenis kain. Apabila undangan tidak memenuhi _dresscode_ tersebut maka ia tidak bisa datang ke acara. `Interface` kurang lebih juga demikian, kita menentukan apa saja tipe data dan properti yang dibutuhkan. Kemudian mengimplementasikannya pada _Function Component_ dengan `const Button :React.FC &lt;buttonProps&gt; = ({text, bgColor, color}) =&gt; ()`

* `:React.FC` untuk memberitahu fungsi yang dibuat adalah _Function Component_
* `&lt;buttonProps&gt;` untuk mengimplementasikan `interface` yang telah dibuat

Untuk belajar lebih lanjut tentang _interface_ bisa https://www.youtube.com/watch?v=5MhFmjLVKfQ&list=PLnQvfeVegcJbjCnML6FdusK-rl-oDRMXJ&index=22[disini] atau https://www.typescriptlang.org/docs/handbook/interfaces.html[disini]

____

People keep answering: “but they will be confused”. YES they will be confused. The goal is not to eliminate confusion from the learning process, it is to not to lose people who give up because what they’re learning feels too far from what they want to be doing (make an app).

&mdash; Dan Abramov (https://twitter.com/dan_abramov/status/1295699738420031488?ref_src=twsrc%5Etfw[@dan_abramov])

____

=== MDXProvider

Menambahkan HTML di _markdown_ akan cukup mengganggu dan menyulitkan kita membaca konten dari _markdown_ itu sendiri (_opini_). Bagaimana bila kita hanya fokus menulis konten blog menggunakan sintaks _markdown_ dan melakukan kustomisasi di _file_ `.tsx` saja?

Pada https://mdxjs.com/table-of-components[dokumentasi MDX], dijelaskan bahwa konten di dalam _file_ `.md` atau `.mdx` akan di-_render_ menjadi sebuah komponen yang berisi _HTML tag_ yang berbeda beda.

Kita akan menggunakan `MDXProvider` yang membantu kita untuk menggunakan _React Component_ yang kita buat untuk mengustomisasi tampilan _Markdown_

[source,mdx]
----
// Markdown
# Welcome!
[link](https://www.example-link.com)

// HTML
<h1>Welcome</h1>
<a href="https://www.example-link.com">link</a>
----

Dengan begitu, kita bisa mengustomisasi setiap _HTML tag_ tersebut seperti yang sudah dicontohkan https://mdxjs.com/getting-started#working-with-components[disini]

. Ubahlah isi _file_ *hello.mdx* menjadi seperti ini
[source,md]
----
# LET'S GO SNOWBOARDING!

## Winter has come! Let's go out!!

<img src="https://images.unsplash.com/photo-1580238053771-c61b5b88650b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2160&q=80" width="100%" caption="Snowboarding by Felipe Giacometti (Unsplash)" />

Lorem, ipsum dolor sit amet consectetur adipisicing elit. Adipisci in a architecto. Asperiores pariatur aspernatur deserunt, eveniet voluptatibus omnis placeat at a magni cupiditate excepturi exercitationem animi earum quod! Sapiente. Est aspernatur eligendi, reprehenderit cum quos deleniti necessitatibus. Officiis quo odio repellat. Eaque cum maiores unde corporis quia consequatur, a sapiente velit fuga nostrum? Voluptatem repellendus reprehenderit nulla molestiae accusamus! Provident fugit iste explicabo, repudiandae vel corporis maiores earum sapiente nulla quae laboriosam! Quod, omnis quis tenetur corrupti, eligendi blanditiis ex voluptate laudantium perferendis voluptatibus, dolore aliquid eaque saepe incidunt!

Doloribus sed voluptatibus corrupti quaerat vero, ab nam dignissimos nulla, sapiente veritatis porro, velit reiciendis. Eveniet quas repellat aspernatur ab ullam assumenda pariatur aperiam explicabo distinctio aut, dolores voluptatem atque! Natus inventore consequatur hic minima dolore, illum recusandae voluptas distinctio dolorem. Commodi eveniet inventore dolorum numquam quia natus, excepturi consectetur tempore corrupti illo cum accusantium libero doloribus consequatur dolore ipsam.

Culpa ex ea unde, sapiente enim doloremque, eveniet repudiandae quas laudantium rerum totam? Libero nesciunt maxime inventore beatae. Tempora alias perspiciatis velit temporibus commodi esse odit aliquid! Aut, maiores quia.
A adipisci animi perferendis dolor, fugit suscipit quaerat reiciendis, aperiam, minus maxime iste qui neque ipsa! Quisquam delectus officia ullam cumque obcaecati, earum ea illo explicabo consequuntur non aut! Eveniet!
----

. Selanjutnya kita akan membuat komponen `Title`, `Subtitle`, `Image`, dan `Paragraph`. Buatlah _file_ berikut di dalam _folder_ *components* dan tambahkan contoh kodenya.
* *Title.tsx*
[source,tsx]
----
import * as React from "react";

const Title: React.FC = (props) => 
    return (
    <h1 style={{textAlign: "center",
                fontWeight:400,
                margin: 0}}
               {...props} 
    />
)

export default Title
----

* *Subtitle.tsx*
[source,tsx]
----
import * as React from "react"

const Subtitle :React.FC = (props) => (
    <h2 style={{textAlign: "center",
                fontWeight:400,
                fontStyle: "italic",
                color:"DarkGray",
                marginTop: "2px"}}
                {...props}
    />
)

export default Subtitle
----

* *Image.tsx*
[source,tsx]
----
import * as React from "react"

const Image = (props) => (
        <img style={{display:"block",
                     margin:"10px auto"}}
                     {...props} />
)

export default Image;
----

* *Paragraph.tsx*
[source,tsx]
----
import * as React from "react";

const Paragraph = (props) => (
    <p style={{color:"#555",
               width: "55%",
               margin: "24px auto",
			   fontSize: "13pt",
			   lineHeight: "1.5"}}
               {...props}	
    />
)

export default Paragraph;
----

. Ubah isi _file_ *index.tsx* dalam _folder_ *pages* menjadi seperti berikut:
[source,tsx]
----
// Menggunakan module ReactJS
import * as React from "react";
import {MDXProvider} from "@mdx-js/react";
// Mengimpor konten file hello.mdx
import Hello from "posts/hello.mdx";
import Title from "@/Title";
import Subtitle from "@/Subtitle";
import Image from "@/Image";
import Paragraph from "@/Paragraph";
// Function Component

// Markdown custom component
const components :object = {
    h1: Title,
    h2: Subtitle,
    p: Paragraph,
    img: Image
}

const Index = () => (
    <main style={{fontFamily:"sans-serif"}}>
        <MDXProvider components={components}>
            <Hello/>
        </MDXProvider>
    </main>
)

export default Index;
----

. Jalankan `npm run dev` atau `yarn dev` maka tampilannya akan seperti berikut

== _Wow! Our first post!!_

Kita telah berhasil mendesain _posting_ pertama kita! Bagus kan?

_Anyway…_

Kita _review_ apa yang baru saja kita lakukan. Pada setiap komponen yang kita buat, kita selalu saja menambahkan `{...props}` pada _HTML tag_. Hal ini ditujukan untuk menerima semua _props_ hasil _render_ dari MDX. Kita bisa lihat contohnya dari https://mdxjs.com/getting-started#working-with-components[dokumentasinya].

Setelah membuat komponen, kita kemudian melakukan perubahan pada *index.tsx* dengan membuat _object_ bernama `components`.

[source,tsx]
----
const components :object = {
    h1: Title,
    h2: Subtitle,
    p: Paragraph,
    img: Image
}
----

`:object` merupakan tipe data dari variabel dan di dalamnya terdapat properti berupa _HTML tag_ seperti yang disebutkan https://mdxjs.com/table-of-components[disini]. Disitu kita membuat _key_ sesuai _HTML tag_ yang dikonversi dan mengisi _value_ dengan komponen yang sebelumnya kita buat. Misal pada `h1` kita menggunakan komponen `Title` maka perubahannya akan seperti berikut:

[source,mdx]
----
// Sebelum render
# LET'S GO SNOWBOARDING!

// Setelah render
<h1 style={{textAlign: "center",
                fontWeight:400,
                margin: 0}}
               {...props}>           
    LET'S GO SNOWBOARDING!
</h1>
----

Agar kita bisa menggunakan komponen tersebut maka kita menambahkan `&lt;MDXProvider components={components}&gt;` dimana nantinya komponen _Markdown_ yang di-_render_ akan menggunakan komponen yang telah kita buat.

Mungkin tadi ada yang sedikit aneh juga pada saat kita mengimpor sebuah _file_ di *index.tsx*

[source,tsx]
----
import Title from "@/Title";
import Subtitle from "@/Subtitle";
import Image from "@/Image";
import Paragraph from "@/Paragraph";
----

Tanda `@/` ini merupakan _alias_ dari direktori yang sudah kita atur di *tsconfig.json* https://www.insert-url-here.com[sebelumnya] yaitu pada bagian `paths`

[source,json]
----
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
        "@/*": ["components/*"]
    },
...
----

Jadi akan sama saja seperti ini

[source,tsx]
----
import Title from "@/Title";
/* Atau */
import Title from "components/Title";
----

Ini hanya mempersingkat penulisan saja guna menyayangi jari kita agar tidak terkena _carpal tunnel syndrome_

*_-_-&quot;_*

== Bonus!

Ada cara yang lebih simpel untuk mengimpor komponen agar tidak terus berulang kali menulis kode yang sama seperti ini

[source,tsx]
----
import Title from "@/Title";
import Subtitle from "@/Subtitle";
import Image from "@/Image";
import Paragraph from "@/Paragraph";
----

Bagaimana bila kita akan mengimpor 20 komponen sekaligus? Pasti akan repot juga kan?

Disini kita akan memermudah dengan mengikuti langkah berikut:

. Buat _file_ *index.tsx* di dalam _folder_ *components*

. Tambahkan kode berikut:

[source,tsx]
----
export {default as Title} from "@/Title";
export {default as Subtitle} from "@/Subtitle";
export {default as Image} from "@/Image";
export {default as Paragraph} from "@/Paragraph";
----

. Pada _folder_ *pages*, ubah bagian `import` di _file_ *index.tsx* menjadi seperti berikut
[source,tsx]
----
// Menggunakan module ReactJS
import * as React from "react";
import {MDXProvider} from "@mdx-js/react";
// Mengimpor konten file hello.mdx
import Hello from "posts/hello.mdx";
// import Title from "@/Title";
// import Subtitle from "@/Subtitle";
// import Image from "@/Image";
// import Paragraph from "@/Paragraph";
import {Title, Subtitle, Paragraph, Image} from "@/.";
----

. Simpan dan jalankan _development server_

Kita telah belajar bagaimana membuat _Custom Component_ pada MDX dan bagaimana menggabungkan _React Component_ dengan _Markdown_. Pada tahap berikutnya kita akan mulai mendesain halaman utama dan bermain main dengan navigasi menggunakan fitur pada NextJS.

_Tunggu…_

Kita melewatkan satu hal, ada yang masih kurang pada tampilan blog kita.

*_……_*

*_Image caption!_*

Barusan kita menggunakan gambar di _markdown_ dengan sintaks berikut:

[source,md]
----
<img src="https://images.unsplash.com/photo-1580238053771-c61b5b88650b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2160&q=80" width="100%" caption="Snowboarding by Felipe Giacometti (Unsplash)" />
----

Gambar yang kita gunakan adalah hasil karya milik orang lain jadi alangkah baiknya kita juga menyebutkan fotografer dan sumbernya.

. Buka _file_ *Image.tsx* dalam _folder_ *components*

. Ubah menjadi berikut:

[source,tsx]
----
import * as React from "react"

const Image = (props) => (
        <div style={{textAlign: "center",
                     fontSize:"11pt",
                     color:"gray"}}>
            <img style={{display:"block",
                        margin:"10px auto"}}
                        {...props} />
        {props.caption}
        </div>
)

export default Image;
----

. Simpan dan jalankan _development server_

Pada bagian bawah gambar akan terdapat tulisan kecil berisikan _caption_ dari gambar tersebut.

Pada MDX, ketika membuat _HTML tag_ `&lt;img&gt;` semua attribut itu akan menjadi properti dari `props`. Itu kenapa ketika kita membuat

[source,html]
----
<img src="source.jpg" width="100%" caption="insert caption" />
----

Maka akan terdapat 3 _props_ yaitu `src`, `width`, dan `caption`, jika kita ingin mengambil _value_ dari salah satunya maka kita hanya mengetik `props.caption`.

'''

_Pada posting berikutnya kita akan fokus mendesain blog kita menggunakan beberapa fitur dari NextJS, bila ingin tahu lebih lanjut soal NextJS bisa belajar lebih lanjut https://nextjs.org/learn/basics/create-nextjs-app?utm_source=next-site&utm_medium=homepage-cta&utm_campaign=next-website[disini]_
